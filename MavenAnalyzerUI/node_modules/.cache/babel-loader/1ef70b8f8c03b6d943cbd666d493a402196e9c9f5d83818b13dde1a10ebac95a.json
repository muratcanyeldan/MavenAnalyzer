{"ast":null,"code":"import React,{useMemo}from'react';import{ResponsiveBar}from'@nivo/bar';import{Box,Typography,CircularProgress}from'@mui/material';/**\n * Vulnerability Severity Chart component using Nivo\n * Displays the distribution of vulnerability severity levels\n * \n * @param {Object} props - Component props\n * @param {Object} props.data - Either analysis data object or bar chart data from API\n * @param {boolean} props.loading - Loading state\n * @param {number} props.height - Chart height in pixels\n */import{jsx as _jsx}from\"react/jsx-runtime\";const VulnerabilitySeverityChart=_ref=>{let{data,loading,height=300}=_ref;// Process data to get vulnerability counts by severity\nconst severityData=useMemo(()=>{// Check if we have the new API data format\nif(data!==null&&data!==void 0&&data.data&&Array.isArray(data.data)){// We have data from the chart data API\nreturn data.data;}// Fallback to the old format (analysis object with dependencies)\nif(!data||!data.dependencies||!Array.isArray(data.dependencies)){return[];}// Initialize counters for each severity level\nconst counts={Critical:0,High:0,Medium:0,Low:0};// Count vulnerabilities by severity\ndata.dependencies.forEach(dependency=>{if(dependency.vulnerabilities&&Array.isArray(dependency.vulnerabilities)){dependency.vulnerabilities.forEach(vuln=>{const severity=vuln.severity||'Unknown';if(severity!=='None'&&counts[severity]!==undefined){counts[severity]++;}});}});// Convert to the format expected by the bar chart\nreturn Object.entries(counts).filter(_ref2=>{let[_,count]=_ref2;return count>0;})// Only include non-zero values\n.map(_ref3=>{let[severity,count]=_ref3;return{category:severity,count:count,color:getColorForSeverity(severity)};});},[data]);// Return loading indicator if data is loading\nif(loading){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',height},children:/*#__PURE__*/_jsx(CircularProgress,{})});}// Return message if no data available\nif(severityData.length===0){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',height,p:2},children:/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",children:\"No vulnerability severity data available\"})});}return/*#__PURE__*/_jsx(Box,{sx:{height},children:/*#__PURE__*/_jsx(ResponsiveBar,{data:severityData,keys:(data===null||data===void 0?void 0:data.keys)||['count'],indexBy:\"category\",margin:{top:40,right:50,bottom:40,left:60},padding:0.3,valueScale:{type:'linear'},indexScale:{type:'band',round:true},colors:_ref4=>{let{data}=_ref4;return data.color;},borderColor:{from:'color',modifiers:[['darker',1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:'Severity Level',legendPosition:'middle',legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:'Count',legendPosition:'middle',legendOffset:-40},enableGridY:true,labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:'color',modifiers:[['darker',1.6]]},animate:true,motionStiffness:90,motionDamping:15,legends:[{dataFrom:'keys',anchor:'bottom-right',direction:'column',justify:false,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:'left-to-right',itemOpacity:0.85,symbolSize:20,effects:[{on:'hover',style:{itemOpacity:1}}]}]})});};// Helper function to get color based on severity\nfunction getColorForSeverity(severity){switch(severity){case'Critical':return'#d32f2f';// dark red\ncase'High':return'#f44336';// red\ncase'Medium':return'#ff9800';// orange\ncase'Low':return'#ffeb3b';// yellow\ndefault:return'#9e9e9e';// grey\n}}export default VulnerabilitySeverityChart;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}